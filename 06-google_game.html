<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>구글게임</title>
</head>

<body>

    <canvas id="canvas"></canvas>

    <script>

        var canvas = document.getElementById('canvas');
        var ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth - 100;
        canvas.height = window.innerHeight - 100;

        // 등장 캐릭터의 속성부터 object자료에 정리해두면 편리
        var dino = {
            x: 10,
            y: 200,
            width: 50,
            height: 50,
            draw() {
                ctx.fillStyle = 'violet';
                ctx.fillRect(this.x, this.y, this.width, this.height); // (좌표x,좌표y, 너비x, 높이y)
            }
        }


        // 장애물도 object자룔 정리해두면 편리
        // width, height 이런한 값들이 각각 다르면서 비슷한 object가 많이 필요하기 때문에
        // class로 만드는 것이 일반적임
        class Cactus {
            constructor() {
                this.x = 600;
                this.y = 200;
                this.width = 50;
                this.height = 50;
            }
            draw() {
                ctx.fillStyle = 'yellow';
                ctx.fillRect(this.x, this.y, this.width, this.height); // (좌표x,좌표y, 너비x, 높이y)
            }
        }



        var timer = 0;
        var cactus여러개 = [];

        // 프레임마다 실행 (1초에 60번 코드 실행)
        // js에서 제공하는 requestAnimationFrame
        // 애니메이션을 알리고 다음 리페인트가 진행되기 전에 해당 애니메이션 업데이트하는 함수 호출
        function test() {
            requestAnimationFrame(test);
            timer++; // 1씩증가

            // diono객체 잔상 지우기
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            if (timer % 120 === 0) { // 120프레임마다 cactus가 찍힘(개인 모니터 주파수마다 60 / 144프레임으로 설정됨)
                // class Cactus 객체부르기
                var cactus = new Cactus();

                cactus여러개.push(cactus);
                //cactus.draw();
            }

            cactus여러개.forEach((a) => {
                a.x--; // --왼쪽 ,  ++오른쪽
                a.draw();
            })

            dino.draw();
        }

        test();
    </script>
</body>

</html>